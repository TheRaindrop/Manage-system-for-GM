webpackJsonp([5],{DlW2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("iD6E"),s=i.n(a),l=i("mvHQ"),n=i.n(l),o=i("BO1k"),c=i.n(o),r={props:{singleHotel:{},index:null,startTime:"",endTime:""},data:function(){return{showFaci:[],faciModal:!1}},computed:{imgShow:function(){var e=[],t=0,i=!0,a=!1,s=void 0;try{for(var l,n=c()(this.singleHotel.imgInfoList);!(i=(l=n.next()).done);i=!0){var o=l.value;if(e.push(o),++t>=3)break}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return e}},methods:{showDetail:function(e){this.$alert(e,{title:"酒店详情",confirmButtonText:"确定",dangerouslyUseHTMLString:!0})},showFacilities:function(e){this.showFaci=e,this.faciModal=!0},hotelDetal:function(){this.$router.push({path:"hotelDetail",query:{resId:this.singleHotel.resId,startTime:this.startTime,endTime:this.endTime}})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"hotel-card"},[i("div",{staticClass:"hotel-card__photo"},[e.imgShow.length>0?i("el-carousel",{attrs:{trigger:"click",height:"180px",autoplay:!1}},e._l(e.imgShow,function(e,t){return i("el-carousel-item",{key:e.index},[i("img",{attrs:{src:e.imageUrl,width:"100%"}})])})):i("div",{staticStyle:{height:"180px","background-color":"rgb(220, 220, 220)"}},[i("p",{staticStyle:{"text-align":"center","padding-top":"80px","font-size":"20px","font-family":'"youyuan"',"font-weight":"bold"}},[e._v("暂无图片")])])],1),i("div",{staticClass:"hotel-card__info"},[i("div",{staticClass:"hotel-card__info_header"},[i("span",{staticClass:"index"},[e._v(e._s(e.index))]),i("span",{staticClass:"name"},[e._v(e._s(e.singleHotel.resName))]),i("span",{staticClass:"grade"},[e._v(e._s(e.singleHotel.resGrade))])]),i("div",{staticClass:"hotel-card__info_detail"},[i("p",{staticClass:"info",domProps:{innerHTML:e._s(e.singleHotel.shortIntro)}}),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e.showDetail(e.singleHotel.intro)}}},[e._v("显示详情")]),i("div",{staticClass:"label"},[e._l(e.singleHotel.hotelThemeRelationInfo,function(t){return[i("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.themeName))]),e._v(" ")]})],2)],1)]),i("div",{staticClass:"hotel-card__syn"},[i("div",{staticClass:"hotel-card__eqpt"},[i("el-button",{attrs:{type:"text"},on:{click:function(t){e.showFacilities(e.singleHotel.resFacilities)}}},[e._v("酒店设施详情")])],1),i("div",{staticClass:"hotel-card__price",on:{click:e.hotelDetal}},[i("span",{staticClass:"logo"},[e._v("￥")]),i("span",{staticClass:"price"},[e._v(e._s(e.singleHotel.minPrice))]),i("span",{staticClass:"char"},[e._v("起>")])])])]),i("el-dialog",{attrs:{title:"酒店设备详情",visible:e.faciModal,width:"30%"},on:{"update:visible":function(t){e.faciModal=t}}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.showFaci}},[i("el-table-column",{attrs:{prop:"facilityCategoryName",label:"设施类型"}}),i("el-table-column",{attrs:{prop:"facilityServicesName",label:"服务类型"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.faciModal=!1}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var h={components:{hotelCard:i("VU/8")(r,d,!1,function(e){i("hLVG")},"data-v-37983f30",null).exports,hotelCityCard:i("OSo9").a},data:function(){return{searchHide:!1,hotel:{},condi:{price:"",level:[],brand:[],orderBy:"",keyword:""},hotelData:{},page:{page_num:1,total_pages:0,total_items:0},loading:!1}},computed:{startTime:function(){var e=new Date(this.hotel.rangeTime[0]);return e.getFullYear()+"-"+(1===String(e.getMonth()+1).length?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(1===String(e.getDate()).length?"0"+e.getDate():e.getDate())},endTime:function(){var e=new Date(this.hotel.rangeTime[1]);return e.getFullYear()+"-"+(1===String(e.getMonth()+1).length?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(1===String(e.getDate()).length?"0"+e.getDate():e.getDate())},priceList:function(){var e=[];if(""!==this.condi.price){var t={};t.priceFrom=parseInt(this.condi.price.split("-")[0]),t.priceTo=parseInt(this.condi.price.split("-")[1]),t.rate=0,e.push(t)}return e}},methods:{getHotelData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.post("/web/jd/searchHotel",{cityCode:this.hotel.destination,sectionName:"cityArea"===this.hotel.scenicClass?this.hotel.scenic:"",businessSectionInfo:"cityBusinessSectionInfo"===this.hotel.scenicClass?this.hotel.scenic:"",cityScenic:"cityScenic"===this.hotel.scenicClass?this.hotel.scenic:"",airRailWay:"cityAirRailWay"===this.hotel.scenicClass?this.hotel.scenic:"",subWay:"citySubWay"===this.hotel.scenicClass?this.hotel.scenic:"",begin:this.startTime,end:this.endTime,pageCount:t,rowCount:20,saleStatus:1,orderBy:[this.condi.orderBy],keyword:this.condi.keyword,searchCondition:{brandList:[],hotelLevelList:this.condi.level,priceFromToList:this.priceList}}).then(function(t){console.log(t);var i=JSON.parse(n()(t.data));s()(i,"data")&&(e.hotelData=i.data.responseResult?i.data.responseResult:null,e.page.page_num=i.data.pageNumber,e.page.total_pages=i.data.totalPatge,e.page.total_items=i.data.totalCount),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1,e.hotelData=null})},pageChange:function(e){this.getHotelData(e)},hotelCitySelect:function(e){this.hotel.scenic=""},scenicSelect:function(e,t){this.hotel.scenic=e,this.hotel.scenicClass=t}},created:function(){if(this.hotel=this.$store.state.hotel,0===this.hotel.rangeTime.length){var e=new Date;this.hotel.rangeTime[0]=new Date,this.hotel.rangeTime[1]=new Date(e.setDate(e.getDate()+1))}this.getHotelData()},mounted:function(){var e,t=this;function i(){return{left:window.pageXOffset,top:window.pageYOffset}}window.onscroll=(e=i().top,function(){e>i().top?(t.searchHide=!1,e=i().top):e<i().top&&(t.searchHide=!0,e=i().top)})},beforeDestroy:function(){this.$store.commit("saveHotel",this.hotel),window.onscroll=null}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"search",class:{"search-hide":e.searchHide}},[i("el-form",{attrs:{inline:!0,model:e.hotel}},[i("el-form-item",{attrs:{label:"目的地"}},[i("hotelCityCard",{attrs:{cityWidth:"200",scenicWidth:"300"},on:{citySelect:e.hotelCitySelect,scenicSelect:e.scenicSelect},model:{value:e.hotel.destination,callback:function(t){e.$set(e.hotel,"destination",t)},expression:"hotel.destination"}})],1),i("el-form-item",{attrs:{label:"日期选择"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"入住日期","end-placeholder":"离店日期","value-format":"yyyy-MM-dd"},model:{value:e.hotel.rangeTime,callback:function(t){e.$set(e.hotel,"rangeTime",t)},expression:"hotel.rangeTime"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getHotelData()}}},[e._v("查询")])],1)],1)],1),i("el-card",{staticClass:"screening"},[i("el-form",{attrs:{size:"mini"}},[i("div",{staticClass:"screening__line"},[i("p",{staticClass:"screening__line_cdt"},[e._v("价格范围")]),i("p",{staticClass:"screening__line_clear",class:{screening__line_selected:""!==e.condi.price},on:{click:function(t){e.condi.price=""}}},[e._v("不限")]),i("el-radio-group",{model:{value:e.condi.price,callback:function(t){e.$set(e.condi,"price",t)},expression:"condi.price"}},[i("el-radio",{attrs:{label:"0-200"}},[e._v("200以下")]),i("el-radio",{attrs:{label:"200-300"}},[e._v("200-300")]),i("el-radio",{attrs:{label:"300-500"}},[e._v("300-500")]),i("el-radio",{attrs:{label:"500-100000"}},[e._v("500以上")])],1)],1),i("div",{staticClass:"screening__line"},[i("p",{staticClass:"screening__line_cdt"},[e._v("酒店级别")]),i("p",{staticClass:"screening__line_clear",class:{screening__line_selected:e.condi.level.length},on:{click:function(t){e.condi.level=[]}}},[e._v("不限")]),i("el-checkbox-group",{model:{value:e.condi.level,callback:function(t){e.$set(e.condi,"level",t)},expression:"condi.level"}},[i("el-checkbox",{attrs:{label:"27",name:"type"}},[e._v("二星级/其他")]),i("el-checkbox",{attrs:{label:"26",name:"type"}},[e._v("三星级/舒适")]),i("el-checkbox",{attrs:{label:"24",name:"type"}},[e._v("四星级/高档")]),i("el-checkbox",{attrs:{label:"23",name:"type"}},[e._v("五星级/豪华")])],1)],1),i("div",{staticClass:"screening__line"},[i("p",{staticClass:"screening__line_cdt"},[e._v("排序方式")]),i("p",{staticClass:"screening__line_clear",class:{screening__line_selected:""!==e.condi.orderBy},on:{click:function(t){e.condi.orderBy=""}}},[e._v("不限")]),i("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"默认排序",size:"small"},model:{value:e.condi.orderBy,callback:function(t){e.$set(e.condi,"orderBy",t)},expression:"condi.orderBy"}},[i("el-option",{key:"1",attrs:{value:"resGradeId_desc",label:"低星级优先"}}),i("el-option",{key:"2",attrs:{value:"resGradeId_asc",label:"高星级优先"}}),i("el-option",{key:"3",attrs:{value:"minPrice_desc",label:"低价优先"}}),i("el-option",{key:"4",attrs:{value:"minPrice_asc",label:"高价优先"}})],1)],1),i("div",{staticClass:"screening__line"},[i("p",{staticClass:"screening__line_cdt"},[e._v("酒店关键字")]),i("p",{staticClass:"screening__line_clear",class:{screening__line_selected:""!==e.condi.keyword},on:{click:function(t){e.condi.keyword=""}}},[e._v("不限")]),i("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入酒店品牌关键字"},model:{value:e.condi.keyword,callback:function(t){e.$set(e.condi,"keyword",t)},expression:"condi.keyword"}})],1)])],1),e.loading?i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"loading-block",attrs:{"element-loading-text":"若加载时间过长，请重新搜索"}}):i("div",{staticClass:"main-data"},[null!==e.hotelData?[e._l(e.hotelData,function(t,a){return[i("hotelCard",{attrs:{singleHotel:t,index:a+1,startTime:e.startTime,endTime:e.endTime}}),i("div",{staticClass:"hotel-hr"})]})]:[i("div",{staticClass:"error"},[e._v("没找到相关酒店信息......")])]],2),i("div",{staticClass:"page-block"},[i("el-pagination",{attrs:{layout:"prev, pager, next","page-count":e.page.total_pages,"current-page":e.page.page_num},on:{"current-change":e.pageChange}})],1)],1)},staticRenderFns:[]};var u=i("VU/8")(h,p,!1,function(e){i("lwBo")},"data-v-f06acc5e",null);t.default=u.exports},hLVG:function(e,t){},i9Df:function(e,t,i){var a=i("kM2E");a(a.S,"Reflect",{has:function(e,t){return t in e}})},iD6E:function(e,t,i){e.exports={default:i("njv6"),__esModule:!0}},lwBo:function(e,t){},njv6:function(e,t,i){i("i9Df"),e.exports=i("FeBl").Reflect.has}});
//# sourceMappingURL=5.3e5c74c7c2856ad0eb7d.js.map