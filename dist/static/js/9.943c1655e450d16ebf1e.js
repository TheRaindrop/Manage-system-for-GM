webpackJsonp([9],{b5Kx:function(t,e){},eerB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("qsiO"),r=a("OSo9"),s={components:{flightCityCard:l.a,hotelCityCard:r.a},data:function(){return{hotel:{},hotelOrder:[],flightOrder:[]}},computed:{startTime:function(){var t=new Date(this.hotel.rangeTime[0]);return t.getFullYear()+"-"+(1===String(t.getMonth()+1).length?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(1===String(t.getDate()).length?"0"+t.getDate():t.getDate())},endTime:function(){var t=new Date(this.hotel.rangeTime[1]);return t.getFullYear()+"-"+(1===String(t.getMonth()+1).length?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(1===String(t.getDate()).length?"0"+t.getDate():t.getDate())},flight:function(){return this.$store.state.flight}},methods:{flightOrderDateForm:function(t,e){return t.date_created.substr(0,10)},hotelOrderDateForm:function(t,e){return t.date_created.substr(0,10)},flightSearch:function(){""===this.flight.depart||""===this.flight.arrive?this.$message("查询条件为空"):this.flight.depart===this.flight.arrive?this.$message("到达城市不能与出发城市相同"):this.$router.push({path:"/flight"})},departSelect:function(t){this.$store.commit("departChange",t)},arriveSelect:function(t){this.$store.commit("arriveChange",t)},cityExchange:function(){var t=this.flight.theDepart,e=this.flight.theArrive;this.$store.commit("departChange",e),this.$store.commit("arriveChange",t)},citySelect:function(t){this.hotel.scenic=""},scenicSelect:function(t,e){this.hotel.scenic=t,this.hotel.scenicClass=e},hotelSearch:function(){""===this.hotel.destination?this.$message("查询城市为空"):(this.$store.commit("saveHotel",this.hotel),this.$router.push({path:"/hotel"}))},orderDetail:function(t){this.$router.push({path:"/order",query:{order_id:t}})},getAllOrder:function(){this.$router.push("/order")}},created:function(){var t=this;this.hotel=this.$store.state.hotel;var e=new Date;this.hotel.rangeTime[0]=new Date,this.hotel.rangeTime[1]=new Date(e.setDate(e.getDate()+1)),""===this.$store.state.flight.setTime&&this.$store.commit("setTime",new Date),this.$http.get("/orders?type=air",{params:{page:1}}).then(function(e){t.flightOrder=e.data.results}).catch(function(t){console.log(t)}),this.$http.get("/orders?type=hotel",{params:{page:1}}).then(function(e){t.hotelOrder=e.data.results}).catch(function(t){console.log(t)})},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("机票预定")])]),a("el-form",{attrs:{model:t.flight,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"行程"}},[a("el-col",{attrs:{span:10}},[a("flightCityCard",{attrs:{placeholder:"输入城市/机场"},on:{citySelect:t.departSelect},model:{value:t.flight.depart,callback:function(e){t.$set(t.flight,"depart",e)},expression:"flight.depart"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("span",{staticClass:"exchange",on:{click:t.cityExchange}},[t._v("换")])]),a("el-col",{attrs:{span:10}},[a("flightCityCard",{attrs:{placeholder:"输入城市/机场"},on:{citySelect:t.arriveSelect},model:{value:t.flight.arrive,callback:function(e){t.$set(t.flight,"arrive",e)},expression:"flight.arrive"}})],1)],1),a("el-form-item",{attrs:{label:"出发日期"}},[a("el-form-item",[a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"yyyy-mm-dd","value-format":"yyyy-MM-dd"},model:{value:t.flight.setTime,callback:function(e){t.$set(t.flight,"setTime",e)},expression:"flight.setTime"}})],1)],1)],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"success"},on:{click:t.flightSearch}},[t._v("搜索")])],1)],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("酒店预订")])]),a("el-form",{attrs:{model:t.hotel,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"目的地"}},[a("el-form-item",[a("hotelCityCard",{attrs:{cityWidth:"200",scenicWidth:"300"},on:{citySelect:t.citySelect,scenicSelect:t.scenicSelect},model:{value:t.hotel.destination,callback:function(e){t.$set(t.hotel,"destination",e)},expression:"hotel.destination"}})],1)],1),a("el-form-item",{attrs:{label:"日期选择"}},[a("el-col",[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"入住日期","end-placeholder":"离店日期","value-format":"yyyy-MM-dd"},model:{value:t.hotel.rangeTime,callback:function(e){t.$set(t.hotel,"rangeTime",e)},expression:"hotel.rangeTime"}})],1)],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.hotelSearch}},[t._v("搜索")])],1)],1)],1)],1)],1),a("hr"),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("机票订单列表")]),a("div",{staticClass:"card-extra"},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.getAllOrder}},[t._v("所有订单")])],1)]),a("el-table",{attrs:{data:t.flightOrder,size:"small"}},[a("el-table-column",{attrs:{prop:"order_no",label:"订单号"}}),a("el-table-column",{attrs:{prop:"owner.nickname",label:"机主昵称"}}),a("el-table-column",{attrs:{prop:"owner.phone",label:"机主号码"}}),a("el-table-column",{attrs:{prop:"date_created",label:"创建日期",formatter:t.flightOrderDateForm}}),a("el-table-column",{attrs:{prop:"total",label:"订单金额"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),a("el-table-column",{attrs:{label:"查看详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.orderDetail(e.row.id)}}},[t._v("详情")])]}}])})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("酒店订单列表")]),a("div",{staticClass:"card-extra"},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.getAllOrder}},[t._v("所有订单")])],1)]),a("el-table",{attrs:{data:t.hotelOrder,size:"small"}},[a("el-table-column",{attrs:{prop:"order_no",label:"订单号"}}),a("el-table-column",{attrs:{prop:"owner.nickname",label:"机主昵称"}}),a("el-table-column",{attrs:{prop:"owner.phone",label:"机主号码"}}),a("el-table-column",{attrs:{prop:"date_created",label:"创建日期",formatter:t.hotelOrderDateForm}}),a("el-table-column",{attrs:{prop:"total",label:"订单金额"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),a("el-table-column",{attrs:{label:"查看详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.orderDetail(e.row.id)}}},[t._v("详情")])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,i,!1,function(t){a("b5Kx")},"data-v-cf4f49e8",null);e.default=o.exports}});
//# sourceMappingURL=9.943c1655e450d16ebf1e.js.map