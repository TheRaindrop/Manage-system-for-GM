webpackJsonp([11],{P7ry:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{loading:!1,formCustom:{username:"",passwd:""},ruleCustom:{username:[{validator:function(e,t,o){if(!t)return o(new Error("用户名不能为空"));o()},trigger:"blur"}],passwd:[{validator:function(e,t,o){t?o():o(new Error("请输入密码"))},trigger:"blur"}]},remember:!0,showLogin:!1}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.loading=!0,t.$http.post("/users/token",{},{auth:{username:t.formCustom.username,password:t.formCustom.passwd}}).then(function(e){window.localStorage.setItem("Token",e.data.token),t.$message({message:"登录成功",type:"success"}),!0===t.remember&&localStorage.setItem("gm_username",t.formCustom.username),t.$router.push("/home")}).catch(function(e){t.loading=!1,console.log("Error from Login.vue page:",e)})):t.$message({message:"格式不正确",type:"error"})})},handleReset:function(e){this.$refs[e].resetFields()}},created:function(){localStorage.gm_username&&(this.formCustom.username=localStorage.gm_username)},mounted:function(){this.showLogin=!0,document.getElementById("app").style.height="100%"},destroyed:function(){document.getElementById("app").style.height=""}},r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-wrap"},[o("transition",{attrs:{name:"form-fade",mode:"in-out"}},[o("section",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}]},[o("div",{staticClass:"gm-title"},[e._v("客服管理系统")]),o("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"gm-login"},[o("el-form",{ref:"formCustom",staticClass:"demo-ruleForm",attrs:{model:e.formCustom,rules:e.ruleCustom}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{type:"text",placeholder:"请输入用户名",autofocus:"autofocus"},model:{value:e.formCustom.username,callback:function(t){e.$set(e.formCustom,"username",t)},expression:"formCustom.username"}})],1),o("el-form-item",{attrs:{prop:"passwd"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleSubmit("formCustom")}},model:{value:e.formCustom.passwd,callback:function(t){e.$set(e.formCustom,"passwd",t)},expression:"formCustom.passwd"}})],1),o("el-form-item",{attrs:{prop:"remberMe"}},[o("el-checkbox",{model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._v("记住账号")])],1),o("el-form-item",[o("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"medium"},on:{click:function(t){e.handleSubmit("formCustom")}}},[e._v("登录")])],1)],1)],1)])])],1)},staticRenderFns:[]};var n=o("VU/8")(s,r,!1,function(e){o("jQnC")},"data-v-90f012c2",null);t.default=n.exports},jQnC:function(e,t){}});
//# sourceMappingURL=11.27463e521cafb39c946e.js.map